<wxs module="utils">
  module.exports.max = function (n1, n2) {
    return Math.max(n1, n2)
  }
  module.exports.len = function (arr) {
    arr = arr || []
    return arr.length
  }
</wxs>
<view class='search-wrapper'>
  <view class='result-list'>
    <view wx:if='{{devices.length}}' class='ble-box'>
      <view wx:for='{{ value.length ? searchDevices : devices}}' wx:for-item='item' wx:key='index' class='ble-section' data-device-id="{{item.deviceId}}" data-name="{{item.name || item.localName}}">
        <view class='ble-info'>
          <view class='ble-name line-ellipsis'>{{item.name}} </view>
          <view class='line-ellipsis'>设备ID: {{item.deviceId}}</view>
          <view class='line-ellipsis'>信号强度: {{item.RSSI}}dBm ({{utils.max(0, item.RSSI + 100)}}%)</view>
          <view class='line-ellipsis'>Service数量: {{utils.len(item.advertisServiceUUIDs)}}</view>
          <view class='line-ellipsis'>距离: {{item.distance}} 米</view>
          <view class='ble-tips line-ellipsis' wx:if="{{item.isNear}}">您已经到设备附近啦！</view>
        </view>
      </view>
    </view>

  </view>
</view>